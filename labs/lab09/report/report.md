---
## Front matter
title: "Лабораторная работа№ 8"
subtitle: "Командная оболочки Midnight Commander"
author: "Ильина Любовь Александровна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---



# Цель работы

Освоение основных возможностей командной оболочки Midnight Commander.
Приобретение навыков практической работы по просмотру каталогов и файлов; манипуляций с ними

# Задание

Задание по mc
1. Изучите информацию о mc, вызвав в командной строке man mc.
2. Запустите из командной строки mc, изучите его структуру и меню.
3. Выполните несколько операций в mc, используя управляющие клавиши
(операции с панелями; выделение/отмена выделения файлов, копирова-
ние/перемещение файлов, получение информации о размере и правах доступа
на файлы и/или каталоги и т.п.)
4. Выполните основные команды меню левой (или правой) панели. Оцените сте-
пень подробности вывода информации о файлах.
5. Используя возможности подменю Файл , выполните:
– просмотр содержимого текстового файла;
– редактирование содержимого текстового файла (без сохранения результатов
редактирования);
– создание каталога;
– копирование в файлов в созданный каталог.
6. С помощью соответствующих средств подменю Команда осуществите:
– поиск в файловой системе файла с заданными условиями (например, файла
с расширением .c или .cpp, содержащего строку main);
– выбор и повторение одной из предыдущих команд;
– переход в домашний каталог;
– анализ файла меню и файла расширений.
7. Вызовите подменю Настройки . Освойте операции, определяющие структуру
экрана mc (Full screen, Double Width, Show Hidden Files и т.д.)

5.2.6. Задание по встроенному редактору mc
1. Создайте текстовой файл text.txt.
2. Откройте этот файл с помощью встроенного в mc редактора.
3. Вставьте в открытый файл небольшой фрагмент текста, скопированный из лю-
бого другого файла или Интернета.
4. Проделайте с текстом следующие манипуляции, используя горячие клавиши:
4.1. Удалите строку текста.
4.2. Выделите фрагмент текста и скопируйте его на новую строку.
4.3. Выделите фрагмент текста и перенесите его на новую строку.
4.4. Сохраните файл.
4.5. Отмените последнее действие.
4.6. Перейдите в конец файла (нажав комбинацию клавиш) и напишите некото-
рый текст.
4.7. Перейдите в начало файла (нажав комбинацию клавиш) и напишите неко-
торый текст.
4.8. Сохраните и закройте файл.
5. Откройте файл с исходным текстом на некотором языке программирования (на-
пример C или Java)
6. Используя меню редактора, включите подсветку синтаксиса, если она не вклю-
чена, или выключите, если она включена.

# Выполнение лабораторной работы

Задание по mc
1. Изучите информацию о mc, вызвав в командной строке man mc. (рис. @fig:001)

![Просмотр сведений Midnight Commander](image/img1.png){#fig:001}

2. Запустите из командной строки mc, изучите его структуру и меню. (рис. @fig:002 - @fig:001)

Меню состоит из верхней и нижней строк меню, в середине находятся списки файлов в каталогах.
Верхняя панель меню: Левая панель, Файл, Команды, Настройки, Правая панель. 

Настроим просмотр каталога в виде дерева (рис. @fig:002). Настроим сортировку файлов по размеру (рис. @fig:003). Просмотр информации о файле (рис. @fig:004)

![Меню правой панели и дерево каталогов в правой панели](image/img2.png){#fig:002}

![Сортировка файлов в каталоге по размеру](image/img3.png){#fig:003}

![Просмотр информации о файле](image/img4.png){#fig:004}

В меню Options можно провести настройку взаимодействия с mc и отображения данных в ней.  (рис. @fig:005 - @fig:006) 

![Меню Options(Настройки)](image/img5.png){#fig:005}

![Модальное окно опции Layout меню Options(Настройки)](image/img6.png){#fig:006}

просмотрим Меню 'Команды' (рис. @fig:007) 

![Меню Command(Команды)](image/img7.png){#fig:007}

Нижняя панель меню соответствует действиям по кнопкам F1-F10. Их можно вызвать кнопками Esc+1...Esc+10 или нажать на пункты меню мышкой. (рис. @fig:008) 

![Подменю 1-10](image/img8.png){#fig:008}

3. Выполним несколько операций в mc, используя управляющие клавиши 
Операции с панелями: 
Сочетанием клавиш c-x d - в панелях отразится результат сравнения директорий (@fig:009) Сочетанием клавиш c-u - переставить панели. Панели переставлены, по сравнению с предыдущим положением (@fig:010),
 
![Сравнене директорий](image/img9.png){#fig:009}

![Положение панелей после перестановки](image/img10.png){#fig:010}

Выделение/отмена выделения файлов c-T или Insert (@fig:011)

![Выделение файлов в правой панели](image/img11.png){#fig:011}

Копирование F5 (@fig:012)/перемещение файлов F6, (@fig:013)

![Модальное окно копирования файлов в каталог на соседней панели](image/img12.png){#fig:012}

![Перемещение файла в соседнюю панель](image/img13.png){#fig:013}

Получение информации о размере и правах доступа на файлы и/или каталоги и т.п. c-x i (@fig:014)

![Получение информации о размере и правах доступа на каталог](image/img14.png){#fig:014}

4. Выполните основные команды меню левой (или правой) панели. Оцените степень подробности вывода информации о файлах. Выберем пункт меню Listing mode и выберем пользовательский вид списка файлов  (@fig:015). Просмотрим каталоги в виде дерева (@fig:016)

![Модальное окно пункта Listing mode](image/img15.png){#fig:015}

![Сортировка файлов по размеру](image/img16.png){#fig:016}

5. Используя возможности подменю Файл, выполните:
– просмотр содержимого текстового файла с помощью F3 (@fig:017)

![Просмотр содержимого текстового файла](image/img17.png){#fig:017}

– редактирование содержимого текстового файла (без сохранения результатов редактирования) с помощью F4; (@fig:018)

![Редактирование содержимого текстового файла](image/img18.png){#fig:018}

– создание каталога с помощью F7; (@fig:019)

![Создание каталога](image/img19.png){#fig:019}

– копирование файлов в созданный каталог с помощью F5 после их выделения Insert (@fig:020)

![Копирование файлов в созданный каталог](image/img20.png){#fig:020}

6. С помощью соответствующих средств подменю Команда осуществите:
– поиск в файловой системе файла с заданными условиями (например, файла с расширением .c или .cpp, содержащего строку main) c помощью Find; (@fig:021 - @fig:022)

![поиск в файловой системе файла с заданными условиями](image/img21.png){#fig:021}

![Результат поиска в файловой системе файла с заданными условиями](image/img22.png){#fig:022}

– выбор и повторение одной из предыдущих команд с помощью command history; (@fig:023)

![выбор и повторение одной из предыдущих команд](image/img23.png){#fig:023}

– переход в домашний каталог с помощью command history (@fig:024);

![переход в домашний каталог](image/img24.png){#fig:024}

– анализ файла меню и файла расширений (@fig:025) , (@fig:026). 

![открытие файла меню](image/img25.png){#fig:025}

![открытие файла расширений](image/img26.png){#fig:026}

7. Вызовите подменю Настройки . Освойте операции, определяющие структуру
экрана mc (Full screen, Double Width, Show Hidden Files и т.д.) (@fig:027)

![Изменение выбора  Show Hidden Files  в модальном окне Panel options ](image/img27.png){#fig:027}

5.2.6. Задание по встроенному редактору mc
1. Создадим текстовый файл text.txt в командной строке с помощью touch (@fig:028)

![Создание файла](image/img28.png){#fig:028}

2. Откроем этот файл с помощью встроенного в mc редактора по кнопке F4. (@fig:029)

![Открытие файла с помощью встроенного редактора](image/img29.png){#fig:029}

3. Вставим в открытый файл небольшой фрагмент текста, скопированный из любого другого файла или Интернета. (@fig:030)

![Вставка текста в файл](image/img30.png){#fig:030}

4. Проделаем с текстом следующие манипуляции, используя горячие клавиши:
4.1. Удалим строку текста , нажав с-y (@fig:031)

![Удаление строки в файле](image/img31.png){#fig:031}

4.2. Выделим фрагмент текста, нажав F3, и скопируем его на новую строку с F5. (@fig:032)

![Копирование фрагмента текста на новую строку](image/img32.png){#fig:032}

4.3. Выделим фрагмент текста, нажав F3, и перенеcем его на новую строку. (@fig:033)

![Перемещение фрагмента текста на новую строку](image/img33.png){#fig:033}

4.4. Сохраним файл, нажав F2 (@fig:034)

![Сохранение файла F2](image/img34.png){#fig:034}

4.5. Отменим последнее действие, нажав c-u

4.6. Перейдем в конец файла (нажав Fn+стрелка вниз+стрелка вправо) и напишем the end. (@fig:035)

4.7. Перейдем в начало файла (нажав Fn+стрелка вверх+стрелка влево) и напишем na4alo. 

![Внесение текста в начало и конец файла](image/img35.png){#fig:035}

4.8. Сохраним и закроем файл, нажав F10. (@fig:036)

![Сохранение файла F10](image/img36.png){#fig:036}

5. Откроем файл с исходным текстом на некотором языке программирования (например C), нажав F4

![Открытие файла формата С](image/img37.png){#fig:037}

6. Используя меню редактора, подсветку синтаксиса выключим, нажав ctrl+S  (@fig:038)

![Отключение подсветки синтаксиса в файле .cpp](image/img38.png){#fig:038}

# Контрольные вопросы

1. Какие режимы работы есть в mc. Охарактеризуйте их.

   - Midnight Commander имеет два основных режима работы:

     Командный режим: в этом режиме вы можете использовать mc как файловый менеджер и выполнить различные действия над файлами и каталогами, такие как копирование, перемещение, удаление, переименование, создание, изменение прав доступа и т.д. Для этого используются различные клавиши, например, F5 - копировать, F6 - переместить, F8 - удалить, F9 - создать каталог, F4 - редактировать файл и т.д.

     Режим редактирования: в этом режиме вы можете создавать и редактировать текстовые файлы. Для входа в этот режим необходимо выделить файл и нажать клавишу F4 или выбрать опцию "Редактировать" в верхней части экрана. В этом режиме вы можете использовать различные функции, такие как поиск, замена, копирование и вставка текста, а также изменение кодировки и перевода строк.

     Кроме того, в mc есть ряд дополнительных режимов работы, которые можно настроить в соответствии с индивидуальными потребностями и предпочтениями пользователя:

     Режим FTP: позволяет подключаться к удаленному серверу через протокол FTP и работать с файлами и каталогами на этом сервере, как если бы они были локальными.

     Режим терминала: позволяет работать с командной строкой внутри mc, что может быть удобно для выполнения различных задач, таких как управление файлами, настройка системы и т.д.

     Режим сравнения файлов: позволяет сравнивать содержимое двух файлов и выявлять различия между ними.

     Режим пакетной обработки файлов: позволяет выполнять однотипные действия с несколькими файлами или каталогами одновременно.

     Режим архивации: позволяет создавать и распаковывать архивы различных форматов (tar, gz, zip и т.д.)

2. Какие операции с файлами можно выполнить как с помощью команд shell, так и с помощью меню (комбинаций клавиш) mc? Приведите несколько примеров.

Создать файл, удалить файл, переименовать файл, копировать файл, редактировать файл, прочитать содержимое файла.

Перемещение файла: в командной строке можно выполнить команду "mv <source_file> <destination_file>", а в mc - нажать клавишу F6, выделить файл и выбрать опцию "Переместить" в меню.

Изменение прав доступа к файлу: в командной строке можно выполнить команду "chmod <permissions> <file>", а в mc - нажать клавишу F9, выделить файл и выбрать опцию "Свойства" в меню, затем изменить права доступа в соответствующем поле.

3. Опишите структура меню левой (или правой) панели mc, дайте характеристику
  командам.

  - Перейти в строку меню панелей mc можно с помощью функциональной клавиши F9 . В строке меню имеются пять меню: Левая панель , Файл , Команда , Настройки
    и Правая панель .
    Подпункт меню Быстрый просмотр позволяет выполнить быстрый просмотр содержимого панели.
    Подпункт меню Информация позволяет посмотреть информацию о файле или
    каталоге.
    В меню каждой (левой или правой) панели можно выбрать формат списка :
    – стандартный — выводит список файлов и каталогов с указанием размера и времени правки;
    – ускоренный — позволяет задать число столбцов, на которые разбивается панель при выводе списка имён файлов или каталогов без дополнительной информации;
    – расширенный — помимо названия файла или каталога выводит сведения о правах доступа, владельце, группе, размере, времени правки;
    – определённый пользователем — позволяет вывести те сведения о файле или каталоге, которые задаст сам пользователь.
    Подпункт меню Порядок сортировки позволяет задать критерии сортировки при
    выводе списка файлов и каталогов: без сортировки, по имени, расширенный, время правки, время доступа, время изменения атрибута, размер, узел

4. Опишите структура меню Файл mc, дайте характеристику командам.

   Просмотр – просмотр текущего файла

   Просмотр вывода команды – функция запроса команды с параметрами

   Правка – открывает текущий файл для его редактирования

   Копирование – копирует файлы или каталоги в указанное место

   Права доступа – позволяет изменить права доступа к одному или нескольким файлам/каталогам

   Жесткая ссылка – позволяет создать жёсткую ссылку к текущему файлу

   Символическая ссылка – позволяет создать символическую ссылку к файлу.

   Владелец/группа – позволяет задать владельца и имя группы для одного или нескольких файлов/каталогов

   Права (Расширенные) – позволяет изменить права доступа и владения для одного или нескольких файлов или каталогов

   Переименование – переименовывает файл/каталог

   Создание каталога – создает каталог

   Удалить – удаляет файл/каталог

   Выход – завершает работу MC

5. Опишите структура меню Команда mc, дайте характеристику командам.

   В меню Команда содержатся более общие команды для работы с mc 
   Команды меню Команда :

   – Дерево каталогов — отображает структуру каталогов системы.

   – Поиск файла — выполняет поиск файлов по заданным параметрам.

   – Переставить панели — меняет местами левую и правую панели.

   – Сравнить каталоги ( Ctrl-x d ) — сравнивает содержимое двух каталогов.

   – Размеры каталогов — отображает размер и время изменения каталога (по умолчанию в mc размер каталога корректно не отображается).

   – История командной строки — выводит на экран список ранее выполненных в оболочке команд.

   – Каталоги быстрого доступа ( Ctrl-\ ) — пр вызове выполняется быстрая смена текущего каталога на один из заданного списка.

   – Восстановление файлов — позволяет восстановить файлы на файловых системах ext2 и ext3.

   – Редактировать файл расширений — позволяет задать с помощью определённого синтаксиса действия при запуске файлов с определённым расширением (например, какое программного обеспечение запускать для открытия или редактирования файлов с расширением doc или docx).

   – Редактировать файл меню — позволяет отредактировать контекстное меню пользователя, вызываемое по клавише F2 .

   – Редактировать файл расцветки имён — позволяет подобрать оптимальную для пользователя расцветку имён файлов в зависимости от их типа.

6. Опишите структура меню Настройки mc, дайте характеристику командам.

   - Конфигурация — позволяет скорректировать настройки работы с панелями.
   - Внешний вид и Настройки панелей — определяет элементы (строка меню, командная строка, подсказки и прочее), отображаемые при вызове mc, а также геометрию расположения панелей и цветовыделение.
   - Биты символов — задаёт формат обработки информации локальным терминалом.
   - Подтверждение — позволяет установить или убрать вывод окна с запросом подтверждения действий при операциях удаления и перезаписи файлов, а также при выходе из программы.
   - Распознание клавиш — диалоговое окно используется для тестирования функциональных клавиш, клавиш управления курсором и прочее.
   - Виртуальные ФС — настройки виртуальной файловой системы: тайм-аут, пароль и прочее.

7. Назовите и дайте характеристику встроенным командам mc.

   Работа с панелями

   Ctrl + R - обновить активную панель

   Ctrl + \ - справочник каталогов быстрого доступа

   Ctrl + S или M + S- поиск файлов в текущем каталоге по начальным символам

   Ctrl + X H - добавить текущий каталог в справочник каталогов быстрого доступа

   M + G - перейти на первый файл или каталог в видимом списке на панели

   M + J - перейти на последний файл или каталог в видимом списке на панели

   M + R - перейти на средний файл или каталог в видимом списке на панели

   M + O - неактивная панель = активная панель

   M + . - показывать/скрыть скрытые файлы и каталоги

   M + T - cменить вид панели (стандартный, укороченный, расширенный)

   (Plus) - вызвать окно для выделения группы файлов (можно использовать регулярные выражения)

   \ (Backslash) - снять выделение с группы файлов (действие, обратное тому, которое вызывается по клавише "+").

   Работа с файлами

   Shift + F4 - открыть редактор на изменение нового файла, при сохранении будет запрошено его имя

   Shift + F5 - копирование файла в тот же каталог

   Shift + F6 - инлайн-переименование текущего файла

   Ctrl + X C - посмотреть/поменять права (chmod) для отмеченных файлов

   Ctrl + X I - быстрый просмотр информации о текущем объекте на второй панели

   Ctrl + X O - посмотреть/поменять владельца (chown) для отмеченных файлов

   Ctrl + X Q - быстрый просмотр содержимого файла на второй панели

   Ctrl + X S - создать символическую ссылку (symlink)

   Работа с командной строкой

   M + Enter - вставляет в командную строку имя файла, на котором находится курсор

   M + P - показывает в командной строке предыдущую команду

   M + N - показывает в командной строке следующую команду

   M + <TAB> или Esc + <TAB> - автодополнение команды, если вариантов несколько - то повторное нажатие высвечивает список возможных вариантов

   Ctrl + X P или M + A - вставить в командную строку путь текущей панели

   Ctrl + X T - вставить в командную строку выделенные объекты

8. Назовите и дайте характеристику командам встроенного редактора mc.

   Ctrl-y удалить строку

   Ctrl-u отмена последней операции

   Ins вставка/замена

   F7 поиск (можно использовать регулярные выражения)

   Shift-F7 повтор последней операции поиска

   F4 замена

   F3 первое нажатие — начало выделения, второе — окончание выделения

   F5 копировать выделенный фрагмент

   F6 переместить выделенный фрагмент

   F8 удалить выделенный фрагмент

   F2 записать изменения в файл

   F10 выйти из редактора

9. Дайте характеристику средствам mc, которые позволяют создавать меню, определяемые пользователем.
  Строка главного меню появляется в верхней части экрана после нажатия клавиши F9 или щелчка мыши по верхней рамке экрана. Меню состоит из пяти пунктов: "Левая", "Файл", Команды", Настройки" и "Правая" (в английской версии соответственно "Left", "File", "Command", "Options" и "Right"). При выборе одного из этих пунктов появляется соответствующее выпадающее меню. 

  Пункты меню "Левая" и "Правая " ("Верхняя" и "Нижняя") позволяют изменить вид, соответственно, левой и правой (или верней и нижней) панелей и характер отображаемой в панели информации, в частности, выполнить соединения с удаленными компьютерами.

  Меню "Файл" позволяет выполнить какие-то действия с выбранным файлом или группой помеченных файлов.

  Меню "Команды" перечисляет действия, которые имеют более общий характер и не относятся только к выделенному в данный момент файлу или группе помеченных файлов.

  Меню "Настройки" служит для задания ряда параметров, определяющих внешний вид и поведение программы Midnight Commander. Один из пунктов этого меню служит для сохранения настроек, заданных пользователем.

10. Дайте характеристику средствам mc, которые позволяют выполнять действия, определяемые пользователем, над текущим файлом.

C-l Обновляет всю информацию, отображаемую программой Midnight Commander.

C-x c Запускает команду Chmod для подсвеченного файла или группы отмеченных файлов.

C-x o Запускает команду Chown для подсвеченного файла или группы отмеченных файлов.

C-x l Запускает команду создания жесткой ссылки.

C-x s Запускает команду создания абсолютной символической ссылки.

C-x v Запускает команду создания относительной символической ссылки. Для более детальной информации о ссылках смотрите раздел Меню Файл

C-x i Переводит пассивную панель в режим "Информация".

C-x q Переводит пассивную панель в режим быстрого просмотра.

C-x ! Выполняется пункт меню "Критерий панелизации".

C-x h Добавить имя каталога в "Каталоги быстрого доступа".

M-! Выполняет пункт меню "Просмотр вывода команды", который описан подробнее в разделе "Меню "Файл".

M-? Вызов диалогового окна "Поиск файла".

M-c Вызов диалогового окна "Быстрая смена каталога".

C-o Если Midnight Commander запущен в консоли Linux или FreeBSD, или через xterm, вам будет показан вывод предыдущей команды. При этом на Linux-консоли Midnight Commander использует встроенную программу (cons.saver) для сохранения выводимой информации и демонстрации ее на экране.


# Выводы

Освоили основных возможностей командной оболочки Midnight Commander.
Приобрели навыки практической работы по просмотру каталогов и файлов; манипуляций с ними

